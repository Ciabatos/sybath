// GENERATED CODE - SHOULD BE EDITED MANUALLY TO END CONFIGURATION - actionGetMethodAction.hbs
"use server"

import { auth } from "@/auth"
import { T{{methodPascalName}}ServiceParams, {{methodCamelName}}Service } from "@/methods/services/{{schema}}/{{methodCamelName}}Service"

//MANUAL CODE - START

type T{{methodPascalName}}ActionParams = Omit<T{{methodPascalName}}ServiceParams, "playerId">

//MANUAL CODE - END

export async function {{methodName}}(params: T{{methodPascalName}}ActionParams) {
  const session = await auth()
  const playerId = session?.user?.playerId

  if (!playerId || isNaN(playerId)) {
    return
  }

  //MANUAL CODE - START

  //MANUAL CODE - END

  const data: T{{methodPascalName}}ServiceParams = {
    playerId: playerId,
    ...params,
  }

  try {
    const result = await {{methodCamelName}}Service(data)
    return result
  } catch (error) {
    console.error("Error {{methodName}} :", error)
    return "Failed to {{methodName}}"
  }
}