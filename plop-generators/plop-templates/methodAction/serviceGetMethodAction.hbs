// GENERATED CODE - SHOULD BE EDITED MANUALLY TO END CONFIGURATION - serviceGetMethodAction.hbs
"use server"

import { {{methodParamsTypeName}}, {{methodCamelName}} } from "@/db/postgresMainDatabase/schemas/{{schema}}/{{methodCamelName}}"

//MANUAL CODE - START

export type T{{methodPascalName}}ServiceParams = {
sessionUserId: number
playerId: number
}

//MANUAL CODE - END

export async function {{methodCamelName}}Service(params: T{{methodPascalName}}ServiceParams) {
  const sessionPlayerId = (await getActivePlayerServer({ userId: params.sessionUserId })).raw[0].id

  if (sessionPlayerId !== params.playerId) {
    throw new Error("Active player mismatch")
  }

  //MANUAL CODE - START

  {{#each methodParamsColumns}}
  const {{camelName}} =
  {{/each}}

  //MANUAL CODE - END

  const data: {{methodParamsTypeName}} = {
    {{#each methodParamsColumns}}
    {{camelName}}: {{camelName}},
    {{/each}}
  }

  try {
    const result = await {{methodCamelName}}(data)
    return result
  } catch (error) {
    console.error("Error {{methodCamelName}}Service :", error)
    return "Failed to {{methodCamelName}}Service"
  }
}