"use server"
import { query } from "@/db/postgresMainDatabase/postgresMainDatabase"

export type {{typeName}} = {
{{#each fields}}
  {{name}}{{optional}}: {{tsType}}
{{/each}}
}

{{#if (eq indexMethodName "arrayToObjectKeysId")}}
export type {{typeName}}RecordBy{{typeRecordName}} = Record<string, {{typeName}}>
{{else}}
export type {{typeName}}RecordBy{{typeRecordName}} = Record<number, {{typeName}}> 
{{/if}}

export async function get{{methodName}}() {
  try {
    const result = await query("SELECT * FROM {{schema}}.{{table}}")
    return result.rows as {{typeName}}[]
  } catch (error) {
    console.error("Error fetching get{{methodName}}:", error)
    throw new Error("Failed to fetch get{{methodName}}")
  }
}
